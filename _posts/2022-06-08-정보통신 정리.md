---
layout: post
category: Note
---
> `Computer Networking Top Down Approach` 정리

교수님이 강조한 것들 모음

<details>
<summary>4장 & 5장</summary>
<div markdown="1">

## Network-layer function
- **Data plane** : forwarding
- **Control plane** : routing

## Forwarding & Routing
Forwarding: 라우터의 input link에서 output link로 packet으로 전달하는 내부 동작
Routing: forwarding+network의 모든 router의 packet path를 결정하는 것

## Router의 구조
### Input port
router로 들어오는 physical link와 연결. routing protocol의 정보를 전달하는 control packet은 input port에서 routing processor로 전달된다. 또한 data link layer의 기능을 수행. input port의 forwarding 결정은 복사된 table을 보고 routing processor가 아닌 각 input port에 의해서 이루어진다. forwaridng table의 lookup은 table에서 longest prefix matching rules을 찾으면 된다.

### Switching
router의 input porot를 output port로 연결 이 구조를 통해 packet은 output port로 이동한다.

- **via memory** : speed limited by memory bandwidth.

- **via a bus** : 공유되는 bus로 인해 한번에 한 packet만이 bus 통해 전달된다. 만약 다른 packet이 bus를 사용중이면 도착한 packet은 input port에 대기한다.

- **via interconnection network** : bus bandwidth limitations을 해결했다. Cisco 12000!

### Input port Queuing
packet의 도착속도가 router의 처리속도보다 크면 buffer가 차기시작하고 결국 buffer가 꽉차면 packet을 버려지게 된다. HOL blocking

### Output port queueing
switch의 처리 속도가 output port가 link로 내보내는 속도보다 크다면, 한 단위시간(router의 내부에서 switch가 packet을 전송하는 시간)에 하나의 packet을 전송하므로, output port의 buffer에 packet이 쌓이면서 결국, packet loss가 발생한다. with N flows, buffer의 양은 B= RTT*C/ root(N)

### Scheduling mechanisms
- FIFO(first in first out) scheduling
- Priority scheduling
- RR(Round Robin) scheduling
- WFQ(Weighted Fair Queuing)

## IP datagram format
![ip](./image/ip.jpg)

## Compare and Contrast the IPv4 IPv6
- IPv6에는 IPv4헤더에 포함될 수 있는 대부분의 옵션이 포함되지 않은 고정길이 헤더가 있다.
- IPv6 헤더의 크기는 고정되어 Header Length 필드가 필요하지 않다.

## Routing Algorithm
- Objective : 최소 비용 path를 찾아서 packet을 전달한다.

### Link State(LS) algorithm
- Networkt topolgy 사아의 모든 link cost를 이미 알고 있는 상태에서 path를 찾는 것으로 각 노드가 link의 cost와 식별을 포함하는 packet인 link state packet을 network 상의 다른 노드로 broadcasting 함으로써 만들어진다.
- 알고리즘은 다익스트라 알고리즘이다. 다익스트라 알고리즘은 한 노드에서 다른 모든 노드에 이르는 최소 비용 경로를 모두 계산한다.
- Time Complexity: 총 체크하는 노드의 수는 n(n+1)/2이므로 O(n^2)이 된다.
- Problem: 혼잡이나 지연을 기반으로 하는 link방식을 기반으로 사용하는 모든 알고리즘에서 진동문제가 발생한다.
- Solution: traffic을 고려하면 된다. 위와 같은 problem을 막기 위해서 동시에 모든 router가 LS 알고리즘을 수행하지 못하게 한다. 혹은 LS 알고리즘의 결과를 송신하는 시간을 각 노드가 임의로 처리하도록 한다.

### Distance-Vector algorithm
- 직접 연결괸 neighbor가 주는 정보로 계산하고, 결과를 neighbor에게 열린다는 점에서 distributive이며, neighbor과 정보를 교환하지 않을 때까지 지속한다는 점에서 interative이며, 모든 노드가 asynchronous 방식으로 동작한다.
- Bellman-Ford equation(Dynamic programming)
- Problem: 중간에 이동하는 routing table의 정보들이 잘못된 경우 link cost가 증가된 경우
- Solution: Poisoned reverse. 하지만, 세 개 혹은 더 많은 노드를 포함한 routing loop는 감지 할 수가 없다.

## LS vs DV
- Message Complexity
   - LS: 각 node는 network의 각 link cost에 대해서 O(nE)
   - DV: 각 node는 직접 연결된 neighbor와 message를 교환. 단, 알고리즘을 수렴하는 데 걸리는 시간이 많이 걸릴 수 있다.

- Speed of Convergence
   - LS: O(n^2) 알고리즘, oscillations가 발생할 수 있다.
   - DV: 매우 천천히 수렴, routing loop가 발생할 수도 있다.

- Robustness
   - LS : 변질된 link cost되거나 잘못된 table 정보가 broadcasting 되는 경우 문제가 발생.
   - DV : 잘못된 node 계산이 전체 network에 확산될 우려가 있음
   - 어느것도 좋다고 할 수 없다

## AS(autonomous systems)
- Intra-AS routing : RIP, OSPF, IGRP
- Inter-AS routing: BGP

## Intra-AS
- routing among hosts, routers in same AS
- 내부 게이트웨이 프로토콜

### RIP(Routing Information Protocol)
- DV 알고리즘, UDP 사용

### OSPF(Open Shortest Path First)
- 다익스트라 알고리즘을 사용하는 Link State 알고리즘
- Security: router 사이에서의 모든 정보 교환은 인증을 받아야 한다
- 동일한 cost를 갖는 목적지까지의 여러 path가 존재할 때, OSPF는 여러 경로를 사용할 수 있다
- AS를 계층적으로 조직화 할 수 있다
- AS에서 인접한 router뿐만 아니라 다른 모든 router에게 routing information을 link state가 변결될때마다 broadcasting하며, link state가 변경되지 않아도 최소 30분 정도마다 정기적으로 link state를 broadcasting한다.

## IGRP(Interior Gateway Routing Protocol)

## Inter-AS
- routing among AS'es

### BGP(Border Gateway Protocol)
- 표준 inter AS routing protocol
- 반영구적인 TCP 연결을 사용
- eBGP: 외부, iBGP: 내부
- advertised prefix includes BGP attributes
   - AS-PATH: AS 간의 광고 경로를 보여줌
   - NEXT-HOP: indicates specific internal-AS router to next-hop AS

### BGP messages
- OPEN: opens TCP connection to remote BGP peer and authenticates sending BGP peer
- UPDATE: advertises new path (or withdraws old)
- KEEPALIVE: keeps connection alive in absence of UPDATES; also ACKs OPEN request
- NOTIFICATION: reports errors in previous msg; also used to close connection

## 왜 interAS와 intraAS routing이 따로 존재하는가
AS사이에서의 정책문제, 대형 네트워크에서의 확장성, 성능 문제


## Subnetting
네트워크 IP를 할당받는 AS가 자신의 구역 내에서 다시 물리적인 네트워크 환경을 나누기 위해 필요한 작업이다.

## CIDR(Classless InterDomain Routing)
Class를 없앤 방식, class를 구분하지 않기 때문에 어디까지가 network ID인지 알려주는 정보가 따로 필요하다.

## DHCP(Dynaminc Host Configuration Protocol)
- "plug and play" 자동으로 host와 network을 연결시켜준다.
- host IP가 고정으로 할당되거나 유동으로 할당되게 할 수 있으며, IP address뿐만 아니라 subndet mask, 첫번째 hop router, local DNS server address같은 것을 제공한다.

## SDN(Software Defined Network)
중앙 집중형으로 컨트롤하게 하는 네트워크 가상화 접근 방식

- 각 라우터들은 flow table을 가지고 있다
- control plane과 data plane 을 분리하였다
- control plane은 data plane의 스위치들로 하여금 기능들을 보낸다
- control plane에는 이미 존재하는 여러 어플리케이션을 활용한다

## Why a logically centralized control plane?
- 네트워크 관리가 쉬워짐
- 트래픽 흐름이 매우 유연해짐
- OpenFlow API를 통해 프로그래밍 된 라우터들을 이용함

## Data plane switches
fast, simple, commodity switches implementing generalized data-plane forwarding in hardware

## SDN controller
- northbound API를 통해 위에 있는 network-control 어플리케이션과 상호작용
- southbound API를 통해 아래있는 network switches와 상호작용
- 네트워크 상태 정보를 모두 가지고 있어 성능을 위한 분산 시스템, 문제에 대해 견디는 능력 등을 구현함

## Network Control apps
- 컨트롤의 중추 역할
- 내부에 있는 app들은 분산되어 필요에 따라 쓰인다
![sdn](./image/sdn.jpg)

## OpenFlow protocol
- 메세지를 전달하는 데 TCP 사용
- controller-to-switch messages
  - features : 컨트롤러는 스위치의 기능들과 응답에 대해 질의
  - configure : 컨트롤러는 스위치의 기본 파라미터들을 세팅
  - modify-state : flow table을 추가, 삭제, 수정
  - pakcet-out : 컨트롤러가 스위치로 패킷을 바로 보낼 수 있음
- switch-to-controller messages
  - packet-in : 패킷을 컨트롤러에게 보냄
  - flow-removed : flow table 목록을 스위치에서 삭제 가능함
  - port status : 포트의 변화를 컨트롤러에게 알림

## ICMP(Internet Control Message Protocol)
![icmp](./image/icmp.jpg)

dest, echo, TTL이라도 알아두기

## SNMP

</div>
</details>

<details>
<summary>6장</summary>
<div markdown="1">

## Link layer service
- frames: network layer의 datagram을 link에 적용되는 특정 link layer protocol을 따른다
- link 접속: MAC link로 frame을 전송하는 규칙에 대해 명시
- reliable delivery between adjacnet nodes
- flow control: pacing between adjacent sending and recieving nodes
- error detection(오류 검출): signal attenuation(신호 감쇠) 혹은 noise로 인해 발생한 에러들을 검출
- error correction(오류 정정): reciever은 재전송에 의존하지 않고 비트 오류를 식별하고 수정함
- half-duplex(반이중) & full-duplex(전이중)

## link layer의 위치
adaptor(aka NIC, network interface card) 혹은 chip에 있다.

## Error detection
- EDC(Error Detection and Correction bits)
- D = Data protected by error checking, may include header fields
- NOT 100% RELIABLE!
   - protocol은 some errors을 놓칠 수도 있다. 하지만 거의 안놓침
   - EDC가 클수록 기능이 좋음
- (edc) <- D 끝에 붙는다
![edc](./image/edc.jpg)

## Parity checking
parity bit는 데이터 뒤에 1또는 0을 붙여 전체 1의 개수가 even또는 odd가 되도록 만듦

## Internet Checksum
TCP나 UDP에 사용하는 checksum방식과 동일, 모든 비트를 다 훑기때문에 성능은 좋지 못하지만 구현이 simple

## CRC(Cyclic redundancy check)
- more powerful error-detection coding

## Multiple Access Protocol(다중 접속 프로토콜)
- Point-To-Point : 두 router 또는 ISP router 간에 사용될 수 있다
- Broadcast : 구식 이더넷

## Mac protocol: taxonomy
- Channel partitioning
   - 시간에 따라 : TDMA
   - 주파수에 따라 : FDMA
   - 코드에 따라 : CDMA
- Random access
  - channel not divided, allow collisions
  - recover from collisions
- taking turns
  - 가장 많이 쓰이는 방식
  - 채널파티셔닝, 랜덤어세스 하는 방식을 혼합한 것

## TDMA
단점: 전송할 packet이 있는 노드가 단 하나인 경우 노드 전송률이 제한되어, 노드가 전송을 위해 자기 차례를 기다려야 한다.

## FDMA
단점 : 전송할 packet을 가진 노드가 하나있더라도 노드는 R/N의 대역폭으로 제한된다

## slotted ALOHA
- Assumptions
  - 모든 프레임이 같은 사이즈
  - time은 동일한 사이즈로 분할됨
  - slot이 시작될 때만 노드의 전송이 시작됨
  - 노드는 synchronized됨 -> 단점이 될 수 있음, slot에 동기화되어야 하는 것
  - 만약 2개 이상의 노드들이 slot에서 transmit한다면 모든 노드는 collision을 detect한다.
- 효율성
  - pakcet을 보내는 active node가 많으면 collision이 발생함. 확률적인 재전송으로 인해 전송을 하지 않는 경우가 발생하는데 이럴경우 낭비되는 slot이 발생함
  - 100 Mbps로 전송 가능한 network에서 실제 처리율은 37 Mbps보다 낮게 된다. 37이 최대임
- 장점
  - single active node는 지속적으로 full rate of channel에서 transmit된다
  - 고도로 분산됨
  - 간단함
- 단점
  - 충돌, slot 낭비
  - 노드들는 전송 시간보다 짧은 시간 내에 충돌을 감지할 수도 있다
  - clock 동기화

## Pure ALOHA
- slot이 없고 완전히 분산된 프로토콜
- frame이 도착하면 노드는 frame을 즉시 broadcast channel로 전송함
- 효율성
  - slotted ALOHA의 절반

## CSMA(carrier sense multiple access)
- Collision
  - A와 B노드가 서로 frame을 전송할 때, A에서 B 사이에는 t시간이 지나야 서로에게 frame이 도착한다고 하면, A가 channel이 비어있어서 frame을 보낸 후 t시간 이후에 B가 보낸 frame을 감지할 수 있게 된다. = Distance& Propagation delay

## CSMA/CD(collision detection)
- CSMA의 carrier sensing과 collision detection을 포함하며, 이더넷 사용
- 효율성
  - Tprop = max prop delay between 2 nodes in LAN
  - Ttrans = time to transmit max-size frame
  - 효율이 1로 수렴하려면 tprop이 0으로 trans이 무한대로 수렴해아한다
  - ALOHA보다 높은 performance를 보인다
  - 간단하고 저렴하고 분산된!

## Taking turs MAC protocol
- Polling : 노드 중 하나를 마스터로 지정하고 마스터 노드는 RR 방식으로 polling한다.
   - 단점: Polling 지연과 마스터 노드의 고장
- Token passing : token이라는 특수 목적을 가진 frame이 정해진 순서대로 노드 간에 전달 됨
   - 단점 : 노드가 토큰을 놓지 않을 때와 토큰 패킷이 사라지거나 손실될 경우

## MAC 주소
한 인터페이스에서 물리적으로 연결된 다른 인터페이스(same network in IP)로 프레임을 가져오는데 사용

## ARP
- IP address와 MAC address 사이에서의 변환을 지원해줌
- 각 노드는 RAM에 APR table을 갖고 있음
- 이 table에 IP address와 MAC address간이 mapping information이 있음
- 이 table에는 TTL값도 있음. 보통 20분

## ARP 동작
- 송신 node는 송신 및 수신 IP address와 MAC address를 포함하는 field를 가진 ARP packet을 만들고 subnet 안의 다른 모든 node에게 query를 한다. -> 이 때 이용하는 것이 broadcasts ARP query(FF-FF-FF-FF-FF-FF)
- packet을 수신한 node는 packet안의 IP address가 가진과 일치하는지 검사하고, 일치하면 응답 ARP packet을 query한 node에게 보낸다.
- 이 응답 ARP를 받은 송신 node는 응답 ARP packet에서 MAC address를 알아내고, 자신의 ARP table을 갱신하고, packet을 destination으로 볼수 있게 된다.
- ARP table은 자동으로 구성된다.

## 이더넷
- single chip, multiple speeds
- 심플하고 싸고
- bus : 90년대 중반까지 유명함
- start : 오늘날 유명함
   - active switch in center
- connectionless & unreliable : sending and recieving NICs 사이에 no handshaking, recieving NIC이 sending NIC에게 acks 혹은 nacks를 보내지 않음

## Switches vs routers
- 모두 store and forward
   - 라우터 : network layer devices
   - 스위치 : link layer devices
- 모두 forwarding table을 가짐
   - 라우터: compute tables using routing 알고리즘, IP 주소
   - 스위치: learn forwarding table using flooding, learning, MAC 주소

</div>
</details>

<details>
<summary>7장 & 외부</summary>
<div markdown="1">

점점 쓰기 싫어지는 구만...~

## CDMA
- encode signal = (original data) x (chipping sequence) -> 송신자가 전송하는 각 bit에 원래 data bit들 보다 훨씬 빠른 속도(칩핑률)로 변하는 신호를 곱하는 방식

## 와이파이
- 현재 802.11 무선랜을 많이 사용함
- 802.11은 BSS(basic service set, 하나 이상의 무선 station과 base station(AP)로 구성됨)을 기본 구성단위로 함
  - CSMA/CA 매체접속 프로토콜 사용
  - 충돌 검출을 하지 않고 충돌 회피 함

## 셀룰러
- FDMA/TDMA 혼합: 스펙트럼을 다수의 주파수 채널로 나누고, 각 주파수 채널을 time slot로 나눔
- CDMA : code division multiple access

## 5G 특징
- High resolution for crazy cell phone users
- Bi-directional large BW
- Less traffic
- 25 Mbps connectivity speed
- Enhanced & available connectivity just about the world
- Uploading & Downloading speed of 5G touching the
peak (up to 1 Gbps)
- Better & fast solutio

동시에 보내서 충돌발생, prepagation delay에 의해
binary exponential backoff algorithm-> n번 충돌이 발생하면 0~2^n-1까지 난수를 발생시킴, 그 중 k를 선택, k*512 delaytimes -> 충돌이 많을 수록 성능이 떨어짐
따라서 노드(트래픽)가 굉장히 낮을 때만 이더넷을 사용

Internet -> Wireless// Wifi, Cellular network(1G...6G)
와이파이와 셀룰러에 가장 큰 차이점 : 와이파이는 데이터 전송률이 높지만, AP로부터의 거리가 제한적이며 셀룰러는 전송거리가 길다.

## 블록체인
- 암호화폐와 블록체인의 관계가 어떻게 되느냐
- 블록체인의 핵심은? p2p를 쓴다. 분산시스템을 쓴다. public ledger(장부) 모든 거래 내용이 기록됨 => 디지털 암호화폐, NFT 등이 가능해짐(Crytocurrency)
- 의료기록, 성적증명서 등등 / 마이닝 <- 검증하는 것 verification
- 비트코인은 first original blockchain! 최초로 블록체인을 응용해서 만든 어플리케이션임 / double-standing problem을 해결함

</div>
</details>