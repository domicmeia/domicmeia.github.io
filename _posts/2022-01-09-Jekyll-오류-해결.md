---
layout: post
category: Pro
---

### `require': cannot load such file -- webrick (LoadError) 발생 시

```yaml
$ bundle add webrick
$ bundle exec jekyll serve
```
ruby 3.0.0부터 webrick이 기본으로 포함된 gem에서 빠졌기 때문이다. webrick을 추가하고 다시 실행하면 된다.

### 로컬파일 수정 후 git에 올릴 때

```yaml
$ git add .
$ git commit -m " "
$ git push
```

현재 디렉토리의 모든 변경 내용을 스테이징 영역으로 넘기고 싶을 때 사용한다. 명령어를 실행한 디렉토리 이하에서 발생한 변경 내용만 포함하며
해당 디렉토리 기준으로 상위 디렉토리의 변경 내용을 포함하지 않는다. git에 push하고 싶지 않은 파일이면 `.gitignore`에 올려주는 것을 잊지 말자!

```yaml
$ git add -A
```

작업 디렉토리 상에 어디에 위치하든 항상 모든 변경 내용을 스테이징으로 넘긴다. 사용할 일이 없지만, 사용할 시 `git status`로 작업 디렉토리와
스테이징 영역의 상태를 확인하도록 하자.

```yaml
$ git status
On brach master
Your branch is up-to-date with 'origin/master'.
nothing to commit, working directory clean
```
위와 같이 뜰 경우 수정된 파일이 없다는 것을 뜻한다.

### Jekyll 설치 및 생성

로컬에 jekyll을 설치 및 생성한다.

```yaml
$ gem install jekyll bundler
$ jekyll new ./
$ bundle install
$ bundle exec jekyll serve
```

### Liquid Exception: Liquid syntax error 해결

Jekyll에서 사용되는 liquid가 이중중괄호를 escape 문자로 사용하기 때문에 발생하는 오류이다.

![e1](./image/error1.png)

다음과 같이 중괄호가 시작하기 전에 raw를, 뒤에는 endraw를 추가하면 문제가 해결된다.


## Jekyll LaTeX 사용하기
글에 행렬 넣으니까 안되길래 검색해보니까 MathJax 라이브러리를 사용해야 된다고 한다.

먼저, **_includes** 폴더에 **Mathjax.html** 파일을 만든다.
```html
<script type="text/javascript">
  window.MathJax = {
    tex: {
      packages: ['base', 'ams']
    },
    loader: {
      load: ['ui/menu', '[tex]/ams']
    },
    startup: {
      ready() {
        MathJax.startup.defaultReady();
        const Macro = MathJax._.input.tex.Symbol.Macro;
        const MapHandler = MathJax._.input.tex.MapHandler.MapHandler;
        const Array = MathJax._.input.tex.ams.AmsMethods.default.Array;
        const env = new Macro('psmallmatrix', Array, [null, '(', ')', 'c', '.333em', '.2em', 'S', 1]);
        MapHandler.getMap('AMSmath-environment').add('psmallmatrix', env);
      }
    }
  };
</script>
<script type="text/javascript" id="MathJax-script" async
  src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js">
</script>
```

**_layouts** 폴더 **default.html** 파일 body부분 안에 아래 내용을 추가한다.
```html
 {% raw %}{% if page.use_math %}
       {% include Mathjax.html %}
 {% endif %}{% endraw %}
```

이제 markdown의 엔진을 변경해준다. _config.yml 파일에 아래 내용을 추가한다.
```yaml
markdown: kramdown
highlighter: rouge
lsi: false
excerpt_separator: "\n\n"
incremental: false
```

작성할 posts에 **use_math: true**을 추가한다.
```markdown
---
layout: post
category: Note
use_math: true
---
```

그런데 행렬 적으면 오류 뜬다. [github issue][issue] 보니까
```yaml
$$ \begin{bmatrix}a & b \\ c & d\end{bmatrix} $$

$를 두 번 쓰니까 해결 됐다.
```

왜인지는 모르겠지만 두 번 적어야 수식이 작성되도록 스크립트가 짜여져있나보다.

## Styling MathJax
이제 수식은 뜨지만, 폰트 사이즈가 콩알만해서 가독성이 떨어진다. 스택오버플로우에 검색해보니까
역시 해결책이 있다. 자세한 이야기는 [페이지][pages]를 참고.

나는 내 css파일에 아래를 추가해서 해결했다.
```css
.MathJax, .MathJax_Display  {
    text-align: center !important;
    font-size: 130%  !important;
}
```

[issue]: https://github.com/jeffreytse/jekyll-spaceship/issues/34
[pages]: https://stackoverflow.com/questions/5639827/styling-mathjax/25329062#25329062